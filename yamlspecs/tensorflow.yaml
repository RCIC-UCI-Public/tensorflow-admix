!include pymodule.yaml
---
- package: tensorflow
  name: tensorflow
  pkgname: "{{name}}_{{version}}_python{{pyversion}}"
  version: "{{versions.tensorflow}}"
  no_src_dir: True
  extension: whl
  suffix: cp38-cp38-linux_x86_64
  src_tarball: "{{name}}-{{version}}-{{suffix}}.{{extension}}"
  # source ditro used for building the whl package
  giturl: https://github.com/tensorflow/tensorflow/archive/v2.0.0.tar.gz
  # built distro source is on google drive, leave empty to prefvent overwriting
  vendor_source: ""
  description: |
    TensorFlow is an open source software library for high performance numerical computation
  root: "{{pkg_defaults.app_path}}/python/{{pyversion}}/lib/python{{pyfamily}}/site-packages"
  install:
    makeinstall: >
      mkdir -p $(ROOT)/{{root}};
      unzip -d $(ROOT)/{{root}} {{src_tarball}};
      (cd $(ROOT)/$(PKGROOT); chmod -R a+r {{name}}*)
  requires:
    - python_{{pyversion}}
    - python_{{pyversion}}-numpy
    - python_{{pyversion}}-six
    - tensorflow-python_{{pyversion}}-absl-py
    - tensorflow-python_{{pyversion}}-astor
    - tensorflow-python_{{pyversion}}-backports.weakref
    - tensorflow-python_{{pyversion}}-gast
    - tensorflow-python_{{pyversion}}-google_pasta
    - tensorflow-python_{{pyversion}}-Keras_applications
    - tensorflow-python_{{pyversion}}-Keras_preprocessing
    - tensorflow-python_{{pyversion}}-opt_einsum
    - tensorflow-python_{{pyversion}}-protobuf
    - tensorflow-python_{{pyversion}}-tensorboard
    - tensorflow-python_{{pyversion}}-tensorflow_estimator
    - tensorflow-python_{{pyversion}}-termcolor
    - tensorflow-python_{{pyversion}}-wrapt
  files: 
    - "{{root}}/*"
